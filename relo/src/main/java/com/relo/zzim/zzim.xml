<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "//mybatis.org/DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace = "com.relo.zzim.ZzimDao">
	<resultMap type ="ZzimVo" id ="ZzimVo" autoMapping ="true">
	<id column="id" property ="id" />
	<result column = "p_num" property ="pNum" />
	<result column = "s_name" property ="sName" />
	<result column = "s_type" property ="sType" />
	<result column = "s_color" property ="sColor" />
	<result column = "s_hope_price" property ="sHopePrice" />
	<result column = "s_grade" property ="sGrade" />
	<result column = "p_end_date" property ="pEndDate" javaType = "java.util.Date" />
	</resultMap> 
	
	<select id = "selectById" parameterType="String" resultMap ="ZzimVo">
	SELECT z.id, z.p_num, s_name, s_type, s_color, s_hope_price, s_grade, p_end_date
	FROM product p, stock s, zzim z  
	WHERE p.p_num = z.p_num AND s.s_num = p.s_num AND z.id=#{id}
	</select>

	<insert id = "insertZzim" parameterType="ZzimVo">
	INSERT INTO zzim VALUES(#{id}, #{pNum})
	</insert>

	<delete id ="deleteZzim" parameterType="ZzimVo">
	DELETE FROM zzim WHERE id = #{id} and p_num = #{pNum}
	</delete>

	<delete id = "deleteZzimAll">
	DELETE FROM zzim WHERE p_num = #{pNum}
	</delete> 
</mapper>